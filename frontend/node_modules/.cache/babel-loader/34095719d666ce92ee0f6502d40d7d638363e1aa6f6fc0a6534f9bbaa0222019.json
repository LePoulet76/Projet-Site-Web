{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\poula\\\\Desktop\\\\Projet-Site-Web-main\\\\Projet-Site-Web-main\\\\frontend\\\\src\\\\pages\\\\forgotpassword.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\"; //permet d'utiliser les balises link et de naviguer entre les apges\nimport axios from \"axios\"; //permet de faire des requetes au serveur\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ForgotPassword() {\n  _s();\n  const [email, setEmail] = useState(''); //on defini l'email vers lequel on va envoyer le mail avec le code de sécurité\n  const [error, setError] = useState(''); //permet de pouvoir mettre une erreur\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const navigate = useNavigate(); //pour pouvoir naviguer entre les pages\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(''); // On vide l'erreur précédente\n\n    if (email === '') {\n      //s'il n'y a pas d'email alors erreur\n      setError('Veuillez entrer votre email');\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      // Vérifie que l'URL correspond bien à ta route backend\n      await axios.post(\"http://localhost:3001/api/forgot-password\", {\n        email\n      }); //envoie une demande au serveur pour qu'il communique avec la bd.js\n\n      alert(\"Un code de validation a été envoyé par email.\");\n\n      // On redirige vers la page où il va taper son code et son nouveau mdp\n      navigate('/changingpassword', {\n        state: {\n          email\n        }\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Erreur lors de l'envoi\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return (\n    /*#__PURE__*/\n    //mise en page \n    _jsxDEV(\"div\", {\n      className: \"min-h-screen w-full flex flex-col bg-cover bg-center overflow-hidden justify-center items-center\",\n      style: {\n        backgroundImage: 'url(\"https://i.postimg.cc/Cxsv37Bv/Sans-titre-3-20260114234428.png\")'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-center mb-2\",\n          children: \"R\\xE9cup\\xE9ration de compte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-700 mb-6\",\n          children: \"Entrez votre email pour recevoir un code \\xE0 4 chiffres.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"block text-gray-700 font-semibold mb-2\",\n            children: \"Email :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isSubmitting,\n          className: \"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition mb-4 disabled:opacity-50\",\n          children: isSubmitting ? 'Envoi...' : 'Recevoir le code'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 text-center mb-4\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            className: \"text-blue-600 hover:underline\",\n            children: \"Retour \\xE0 la connexion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this)\n  );\n}\n_s(ForgotPassword, \"dV83eVo7ojbFy0ShOwyhs4jMvn8=\", false, function () {\n  return [useNavigate];\n});\n_c = ForgotPassword;\nvar _c;\n$RefreshReg$(_c, \"ForgotPassword\");","map":{"version":3,"names":["React","useState","Link","useNavigate","axios","jsxDEV","_jsxDEV","ForgotPassword","_s","email","setEmail","error","setError","isSubmitting","setIsSubmitting","navigate","handleSubmit","e","preventDefault","post","alert","state","err","_err$response","_err$response$data","response","data","className","style","backgroundImage","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","value","onChange","target","required","disabled","to","_c","$RefreshReg$"],"sources":["C:/Users/poula/Desktop/Projet-Site-Web-main/Projet-Site-Web-main/frontend/src/pages/forgotpassword.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\"; //permet d'utiliser les balises link et de naviguer entre les apges\nimport axios from \"axios\";//permet de faire des requetes au serveur\n\nexport default function ForgotPassword() {\n    const [email, setEmail] = useState('');//on defini l'email vers lequel on va envoyer le mail avec le code de sécurité\n    const [error, setError] = useState('');//permet de pouvoir mettre une erreur\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const navigate = useNavigate();//pour pouvoir naviguer entre les pages\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError(''); // On vide l'erreur précédente\n\n        if (email === '') {//s'il n'y a pas d'email alors erreur\n            setError('Veuillez entrer votre email');\n            return;\n        }   \n\n        setIsSubmitting(true);\n        \n        try {\n            // Vérifie que l'URL correspond bien à ta route backend\n            await axios.post(\"http://localhost:3001/api/forgot-password\", { email });//envoie une demande au serveur pour qu'il communique avec la bd.js\n            \n            alert(\"Un code de validation a été envoyé par email.\");\n            \n            // On redirige vers la page où il va taper son code et son nouveau mdp\n            navigate('/changingpassword', { state: { email } }); \n        }\n        catch (err) {\n            setError(err.response?.data?.error || \"Erreur lors de l'envoi\");\n        } finally {\n            setIsSubmitting(false);\n        }   \n    };\n\n    return (//mise en page \n        <div className=\"min-h-screen w-full flex flex-col bg-cover bg-center overflow-hidden justify-center items-center\" style={{\n            backgroundImage: 'url(\"https://i.postimg.cc/Cxsv37Bv/Sans-titre-3-20260114234428.png\")',\n        }}>\n        <form onSubmit={handleSubmit} className=\"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm\">\n            <h1 className=\"text-2xl font-bold text-center mb-2\">Récupération de compte</h1>\n            <p className=\"text-center text-gray-700 mb-6\">Entrez votre email pour recevoir un code à 4 chiffres.</p>\n            \n            <div className=\"mb-6\">\n                <label htmlFor=\"email\" className=\"block text-gray-700 font-semibold mb-2\">Email :</label>   \n                <input \n                    type=\"email\" \n                    id=\"email\" \n                    value={email} \n                    onChange={(e) => setEmail(e.target.value)} \n                    required \n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                />\n            </div>\n            \n            <button type=\"submit\" disabled={isSubmitting} className=\"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition mb-4 disabled:opacity-50\">\n                {isSubmitting ? 'Envoi...' : 'Recevoir le code'}\n            </button>\n\n            {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\n            \n            <p className=\"text-center text-gray-700\">\n                <Link to=\"/login\" className=\"text-blue-600 hover:underline\">Retour à la connexion</Link>\n            </p>\n        </form>\n        </div>\n    );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB,CAAC,CAAC;AACtD,OAAOC,KAAK,MAAM,OAAO,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACrC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC,CAAC;EACvC,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC,CAAC;EACvC,MAAM,CAACY,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAMc,QAAQ,GAAGZ,WAAW,CAAC,CAAC,CAAC;;EAE/B,MAAMa,YAAY,GAAG,MAAOC,CAAC,IAAK;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBN,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;IAEd,IAAIH,KAAK,KAAK,EAAE,EAAE;MAAC;MACfG,QAAQ,CAAC,6BAA6B,CAAC;MACvC;IACJ;IAEAE,eAAe,CAAC,IAAI,CAAC;IAErB,IAAI;MACA;MACA,MAAMV,KAAK,CAACe,IAAI,CAAC,2CAA2C,EAAE;QAAEV;MAAM,CAAC,CAAC,CAAC;;MAEzEW,KAAK,CAAC,+CAA+C,CAAC;;MAEtD;MACAL,QAAQ,CAAC,mBAAmB,EAAE;QAAEM,KAAK,EAAE;UAAEZ;QAAM;MAAE,CAAC,CAAC;IACvD,CAAC,CACD,OAAOa,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACRZ,QAAQ,CAAC,EAAAW,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcG,IAAI,cAAAF,kBAAA,uBAAlBA,kBAAA,CAAoBb,KAAK,KAAI,wBAAwB,CAAC;IACnE,CAAC,SAAS;MACNG,eAAe,CAAC,KAAK,CAAC;IAC1B;EACJ,CAAC;EAED;IAAA;IAAQ;IACJR,OAAA;MAAKqB,SAAS,EAAC,kGAAkG;MAACC,KAAK,EAAE;QACrHC,eAAe,EAAE;MACrB,CAAE;MAAAC,QAAA,eACFxB,OAAA;QAAMyB,QAAQ,EAAEf,YAAa;QAACW,SAAS,EAAC,mDAAmD;QAAAG,QAAA,gBACvFxB,OAAA;UAAIqB,SAAS,EAAC,qCAAqC;UAAAG,QAAA,EAAC;QAAsB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/E7B,OAAA;UAAGqB,SAAS,EAAC,gCAAgC;UAAAG,QAAA,EAAC;QAAsD;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAExG7B,OAAA;UAAKqB,SAAS,EAAC,MAAM;UAAAG,QAAA,gBACjBxB,OAAA;YAAO8B,OAAO,EAAC,OAAO;YAACT,SAAS,EAAC,wCAAwC;YAAAG,QAAA,EAAC;UAAO;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACzF7B,OAAA;YACI+B,IAAI,EAAC,OAAO;YACZC,EAAE,EAAC,OAAO;YACVC,KAAK,EAAE9B,KAAM;YACb+B,QAAQ,EAAGvB,CAAC,IAAKP,QAAQ,CAACO,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE;YAC1CG,QAAQ;YACRf,SAAS,EAAC;UAA6F;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1G,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eAEN7B,OAAA;UAAQ+B,IAAI,EAAC,QAAQ;UAACM,QAAQ,EAAE9B,YAAa;UAACc,SAAS,EAAC,mHAAmH;UAAAG,QAAA,EACtKjB,YAAY,GAAG,UAAU,GAAG;QAAkB;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC,EAERxB,KAAK,iBAAIL,OAAA;UAAGqB,SAAS,EAAC,+BAA+B;UAAAG,QAAA,EAAEnB;QAAK;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAElE7B,OAAA;UAAGqB,SAAS,EAAC,2BAA2B;UAAAG,QAAA,eACpCxB,OAAA,CAACJ,IAAI;YAAC0C,EAAE,EAAC,QAAQ;YAACjB,SAAS,EAAC,+BAA+B;YAAAG,QAAA,EAAC;UAAqB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EAAC;AAEd;AAAC3B,EAAA,CAjEuBD,cAAc;EAAA,QAIjBJ,WAAW;AAAA;AAAA0C,EAAA,GAJRtC,cAAc;AAAA,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}