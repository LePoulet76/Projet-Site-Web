{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\poula\\\\Desktop\\\\Projet-Site-Web-main\\\\Projet-Site-Web-main\\\\frontend\\\\src\\\\components\\\\Tchat.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatComponent({\n  socket,\n  lobbyId\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef(null); // defillement automatique\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    }); //defillement vers le bas (option smooth pour une dessente trnanquille)\n  };\n  useEffect(() => {\n    // scroll à chaque nouveau message\n    scrollToBottom();\n  }, [messages]);\n  useEffect(() => {\n    const handleChatMessage = msg => {\n      setMessages(prev => [...prev, {\n        text: msg.text,\n        type: \"chat message\"\n      }]);\n    };\n    const handleSystemMessage = msg => {\n      setMessages(prev => [...prev, msg]);\n    };\n    socket.on(\"chat message\", handleChatMessage);\n    socket.on(\"system message\", handleSystemMessage);\n    return () => {\n      socket.off(\"chat message\", handleChatMessage);\n      socket.off(\"system message\", handleSystemMessage);\n    };\n  }, [socket]);\n  const sendMessage = e => {\n    e.preventDefault();\n    const messageData = {\n      lobbyId: lobbyId,\n      text: input\n    };\n    if (input.trim() && socket) {\n      socket.emit(\"chat message\", messageData);\n      setMessages(prev => [...prev, {\n        text: input,\n        type: \"chat\"\n      }]);\n      setInput(\"\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[260px] bg-white/40 border border-[#8c6558] rounded-t overflow-y-auto p-3 space-y-2 text-sm\",\n      children: messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-2 rounded ${msg.type === \"connect\" ? \"text-green-600 text-center\" : msg.type === \"disconnect\" ? \"text-red-600 text-center\" : \"bg-gray-200 text-gray-800\"}`,\n        children: msg.type === \"chat\" ? msg.text : /*#__PURE__*/_jsxDEV(\"em\", {\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 47\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"flex gap-2 border border-t-0 border-[#8c6558] bg-pink-400 rounded-b p-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"flex-1 border rounded px-3 py-2\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        placeholder: \"\\xC9cris ton message...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-white text-pink-500 font-bold px-4 rounded\",\n        children: \"Envoyer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 3\n  }, this);\n}\n_s(ChatComponent, \"ABrHAQDP7g0qYpnOwslR1WwKacs=\");\n_c = ChatComponent;\nvar _c;\n$RefreshReg$(_c, \"ChatComponent\");","map":{"version":3,"names":["useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatComponent","socket","lobbyId","_s","messages","setMessages","input","setInput","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleChatMessage","msg","prev","text","type","handleSystemMessage","on","off","sendMessage","e","preventDefault","messageData","trim","emit","className","children","map","i","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/poula/Desktop/Projet-Site-Web-main/Projet-Site-Web-main/frontend/src/components/Tchat.js"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\n\nexport default function ChatComponent({socket,lobbyId}) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef(null); // defillement automatique\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" }); //defillement vers le bas (option smooth pour une dessente trnanquille)\n  };\n  \n  useEffect(() => { // scroll à chaque nouveau message\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    const handleChatMessage = (msg) => {\n      setMessages((prev) => [...prev, { \n          text: msg.text, \n          type: \"chat message\" \n      }]);\n    };\n\n    const handleSystemMessage = (msg) => {\n      setMessages((prev) => [...prev, msg]);\n    };\n\n    socket.on(\"chat message\", handleChatMessage);\n    socket.on(\"system message\", handleSystemMessage);\n\n    return () => {\n      socket.off(\"chat message\", handleChatMessage);\n      socket.off(\"system message\", handleSystemMessage);\n    };\n  }, [socket]);\n\n  const sendMessage = (e) => {\n    e.preventDefault();\n    const messageData = {\n          lobbyId: lobbyId,\n          text: input\n      };\n    if (input.trim() && socket) {\n      socket.emit(\"chat message\", messageData);\n      setMessages((prev) => [...prev, { text: input, type: \"chat\" }]);\n      setInput(\"\");\n    }\n  };\n\n  return (\n  <div className=\"flex flex-col w-full\">\n\n      {/* CHAT BOX */}\n      <div className=\"h-[260px] bg-white/40 border border-[#8c6558] rounded-t overflow-y-auto p-3 space-y-2 text-sm\">\n        {messages.map((msg, i) => (\n          <div\n            key={i}\n            className={`p-2 rounded ${\n              msg.type === \"connect\"\n                ? \"text-green-600 text-center\"\n                : msg.type === \"disconnect\"\n                ? \"text-red-600 text-center\"\n                : \"bg-gray-200 text-gray-800\"\n            }`}\n          >\n            {msg.type === \"chat\" ? msg.text : <em>{msg.text}</em>}\n          </div>\n        ))}\n      </div>\n\n      {/* INPUT BAR */}\n      <form\n        onSubmit={sendMessage}\n        className=\"flex gap-2 border border-t-0 border-[#8c6558] bg-pink-400 rounded-b p-2\"\n      >\n        <input\n          className=\"flex-1 border rounded px-3 py-2\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"Écris ton message...\"\n        />\n        <button className=\"bg-white text-pink-500 font-bold px-4 rounded\">\n          Envoyer\n        </button>\n      </form>\n\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}