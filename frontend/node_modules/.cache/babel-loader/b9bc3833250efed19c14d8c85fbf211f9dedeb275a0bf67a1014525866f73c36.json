{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\poula\\\\Desktop\\\\Projet-Site-Web-main\\\\Projet-Site-Web-main\\\\frontend\\\\src\\\\pages\\\\login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\"; //pour utiliser les balises Link\nimport axios from \"axios\"; //pour faire des requetes au serveur.js\nimport { useInfoJoueur } from './InfoJoueurContext'; //pour avoir accès aux infos du joueur\nimport { useNavigate } from \"react-router-dom\"; // pour gérer le changement de page auto \n\n//connection et inscription sont très similaire car la logique est quasiment la même\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  //on créer les variable qui vont stocker l'email le mdp si il y a une erreur et si le formulaire est en cours d'envoi\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [pseudo, setPseudo] = useState('');\n  const navigate = useNavigate();\n  const {\n    connecterJoueur\n  } = useInfoJoueur();\n  //evite de recharger la page par defaut + vérifie que les champs sont remplis\n  const handleLogin = async e => {\n    e.preventDefault();\n    setError('');\n    if (email === '' || password === '' || pseudo === '') {\n      setError('Veuillez remplir tous les champs');\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      const answer = await axios.post(\"http://localhost:3001/api/login\", {\n        email,\n        password\n      }); //envoie une requete au serveur.js pour vérifier que l'utilisateur existe pour pouvoir se connecter \n      const {\n        token,\n        user\n      } = answer.data;\n      connecterJoueur(user, token);\n      alert(\"Connection avec succès\");\n      navigate('/'); //on retourne à la page d'accueil \n    } catch {\n      var _error$reponse, _error$reponse$data;\n      setError(((_error$reponse = error.reponse) === null || _error$reponse === void 0 ? void 0 : (_error$reponse$data = _error$reponse.data) === null || _error$reponse$data === void 0 ? void 0 : _error$reponse$data.error) || \"Erreur Serveur\"); //erreur le compte n'existe pas\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return (\n    /*#__PURE__*/\n    //mise en page \n    _jsxDEV(\"div\", {\n      className: \"min-h-screen w-full flex flex-col bg-cover bg-center overflow-hidden justify-center items-center\",\n      style: {\n        backgroundImage: 'url(\"https://i.postimg.cc/Cxsv37Bv/Sans-titre-3-20260114234428.png\")'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLogin,\n        className: \"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-center mb-6\",\n          children: \"Connexion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"block text-gray-700 font-semibold mb-2\",\n            children: \" Email :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            onChange: e => setEmail(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"pseudo\",\n            className: \"block text-gray-700 font-semibold mb-2\",\n            children: \"Pseudo :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"pseudo\",\n            name: \"pseudo\",\n            onChange: e => setPseudo(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"block text-gray-700 font-semibold mb-2\",\n            children: \" Mot de passe :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition mb-4\",\n          children: \"Se connecter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 text-center mb-4\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-700 mb-2\",\n          children: [\"Pas de compte ? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/inscription\",\n            className: \"text-blue-600 hover:underline\",\n            children: \"Cr\\xE9er un compte\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 75\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgotpassword\",\n            className: \"text-blue-600 hover:underline\",\n            children: \"Mot de passe oubli\\xE9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)\n  );\n}\n_s(Login, \"R6tSpUQZWhFyH1MFTXkhy6dIdgY=\", false, function () {\n  return [useNavigate, useInfoJoueur];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Link","axios","useInfoJoueur","useNavigate","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","error","setError","isSubmitting","setIsSubmitting","pseudo","setPseudo","navigate","connecterJoueur","handleLogin","e","preventDefault","answer","post","token","user","data","alert","_error$reponse","_error$reponse$data","reponse","className","style","backgroundImage","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","name","onChange","target","value","required","to","_c","$RefreshReg$"],"sources":["C:/Users/poula/Desktop/Projet-Site-Web-main/Projet-Site-Web-main/frontend/src/pages/login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";//pour utiliser les balises Link\nimport axios from \"axios\";//pour faire des requetes au serveur.js\nimport { useInfoJoueur } from './InfoJoueurContext';//pour avoir accès aux infos du joueur\nimport { useNavigate } from \"react-router-dom\"; // pour gérer le changement de page auto \n\n//connection et inscription sont très similaire car la logique est quasiment la même\nexport default function Login() {\n    //on créer les variable qui vont stocker l'email le mdp si il y a une erreur et si le formulaire est en cours d'envoi\n    const[email,setEmail] = useState('');\n    const[password,setPassword] = useState('');\n    const [error, setError] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [pseudo, setPseudo] = useState('');\n    const navigate = useNavigate();\n    const {connecterJoueur} = useInfoJoueur();\n    //evite de recharger la page par defaut + vérifie que les champs sont remplis\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        setError('');\n        if(email === '' || password === '' || pseudo ===''){\n            setError('Veuillez remplir tous les champs');\n            return;\n        }\n        \n        setIsSubmitting(true);\n        try{\n           \n            const answer = await axios.post(\"http://localhost:3001/api/login\",{email,password});//envoie une requete au serveur.js pour vérifier que l'utilisateur existe pour pouvoir se connecter \n            const{token,user} = answer.data;\n            connecterJoueur(user,token);\n            alert(\"Connection avec succès\");\n            navigate('/');//on retourne à la page d'accueil \n        }\n        catch{\n            setError(error.reponse?.data?.error||\"Erreur Serveur\");//erreur le compte n'existe pas\n        }finally{\n            setIsSubmitting(false);\n        }\n    };\n    return (//mise en page \n        <div\n      className=\"min-h-screen w-full flex flex-col bg-cover bg-center overflow-hidden justify-center items-center\"\n      style={{\n        backgroundImage:\n          'url(\"https://i.postimg.cc/Cxsv37Bv/Sans-titre-3-20260114234428.png\")',\n }}\n    >\n        \n        <form onSubmit={handleLogin} className=\"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm\">\n            <h1 className=\"text-2xl font-bold text-center mb-6\">Connexion</h1>\n            <div className=\"mb-4\">\n                <label htmlFor = \"email\" className=\"block text-gray-700 font-semibold mb-2\"> Email :</label>\n                <input type = \"email\" id=\"email\" name=\"email\" onChange={(e) => setEmail(e.target.value)} required className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\" />\n            </div>\n            <div className=\"mb-4\">\n                <label htmlFor = \"pseudo\" className=\"block text-gray-700 font-semibold mb-2\">Pseudo :</label>\n                <input type = \"text\" id=\"pseudo\" name =\"pseudo\" onChange={(e) => setPseudo(e.target.value)} required className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\" />\n            </div>\n            <div className=\"mb-6\">\n                <label htmlFor  =\"password\" className=\"block text-gray-700 font-semibold mb-2\"> Mot de passe :</label>\n                <input type=\"password\" id=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)}  required className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\" />\n            </div>\n            <button type=\"submit\" className=\"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition mb-4\">Se connecter</button>\n            {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\n            <p className=\"text-center text-gray-700 mb-2\">Pas de compte ? <Link to =\"/inscription\" className=\"text-blue-600 hover:underline\">Créer un compte</Link></p>\n            <p className=\"text-center text-gray-700\"><Link to = \"/forgotpassword\" className=\"text-blue-600 hover:underline\">Mot de passe oublié</Link></p>\n        </form>\n        </div>\n    );\n}\n   \n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}