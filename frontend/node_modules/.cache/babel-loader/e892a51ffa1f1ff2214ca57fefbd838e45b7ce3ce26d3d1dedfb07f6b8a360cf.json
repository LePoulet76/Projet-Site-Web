{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usrlocal\\\\Desktop\\\\Projet-Site-Web\\\\frontend\\\\src\\\\components\\\\Waveform.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Waveform = ({\n  audioUrl\n}) => {\n  _s();\n  const containerRef = useRef(null);\n  const waveSurferRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // Si une instance existait déjà, on la détruit proprement\n    if (waveSurferRef.current) {\n      try {\n        waveSurferRef.current.destroy();\n      } catch (err) {\n        console.warn(\"WaveSurfer destroy (ignored):\", err.message);\n      }\n    }\n\n    // Création de l’instance\n    waveSurferRef.current = WaveSurfer.create({\n      container: containerRef.current,\n      waveColor: \"#bbb\",\n      progressColor: \"#4A90E2\",\n      cursorColor: \"#333\",\n      barWidth: 6,\n      responsive: true,\n      height: 150\n    });\n\n    // Quand le son est prêt\n    waveSurferRef.current.on(\"ready\", () => {\n      setIsReady(true);\n    });\n\n    // Charge ton fichier\n    waveSurferRef.current.load(audioUrl);\n\n    // Nettoyage quand on quitte la page\n    return () => {\n      if (waveSurferRef.current && waveSurferRef.current.destroy) {\n        try {\n          waveSurferRef.current.destroy();\n          waveSurferRef.current = null;\n        } catch (err) {\n          console.warn(\"WaveSurfer cleanup error:\", err.message);\n        }\n      }\n    };\n  }, [audioUrl]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\",\n      maxWidth: 600,\n      marginTop: 30\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), !isReady && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: \"center\",\n        color: \"#666\"\n      },\n      children: \"Chargement du son...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(Waveform, \"Bl61HfBqWstD9kBT7WpYV+PItmY=\");\n_c = Waveform;\nexport default Waveform;\nvar _c;\n$RefreshReg$(_c, \"Waveform\");","map":{"version":3,"names":["React","useEffect","useRef","useState","WaveSurfer","jsxDEV","_jsxDEV","Waveform","audioUrl","_s","containerRef","waveSurferRef","isReady","setIsReady","current","destroy","err","console","warn","message","create","container","waveColor","progressColor","cursorColor","barWidth","responsive","height","on","load","style","width","maxWidth","marginTop","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","textAlign","color","_c","$RefreshReg$"],"sources":["C:/Users/usrlocal/Desktop/Projet-Site-Web/frontend/src/components/Waveform.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport WaveSurfer from \"wavesurfer.js\";\r\n\r\nconst Waveform = ({ audioUrl }) => {\r\n  const containerRef = useRef(null);\r\n  const waveSurferRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    // Si une instance existait déjà, on la détruit proprement\r\n    if (waveSurferRef.current) {\r\n      try {\r\n        waveSurferRef.current.destroy();\r\n      } catch (err) {\r\n        console.warn(\"WaveSurfer destroy (ignored):\", err.message);\r\n      }\r\n    }\r\n\r\n    // Création de l’instance\r\n    waveSurferRef.current = WaveSurfer.create({\r\n      container: containerRef.current,\r\n      waveColor: \"#bbb\",\r\n      progressColor: \"#4A90E2\",\r\n      cursorColor: \"#333\",\r\n      barWidth: 6,\r\n      responsive: true,\r\n      height: 150,\r\n    });\r\n\r\n    // Quand le son est prêt\r\n    waveSurferRef.current.on(\"ready\", () => {\r\n      setIsReady(true);\r\n    });\r\n\r\n    // Charge ton fichier\r\n    waveSurferRef.current.load(audioUrl);\r\n\r\n    // Nettoyage quand on quitte la page\r\n    return () => {\r\n      if (waveSurferRef.current && waveSurferRef.current.destroy) {\r\n        try {\r\n          waveSurferRef.current.destroy();\r\n          waveSurferRef.current = null;\r\n        } catch (err) {\r\n          console.warn(\"WaveSurfer cleanup error:\", err.message);\r\n        }\r\n      }\r\n    };\r\n  }, [audioUrl]);\r\n\r\n  return (\r\n    <div style={{ width: \"100%\", maxWidth: 600, marginTop: 30 }}>\r\n      <div ref={containerRef}></div>\r\n      {!isReady && (\r\n        <p style={{ textAlign: \"center\", color: \"#666\" }}>Chargement du son...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Waveform;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,UAAU,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,QAAQ,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACjC,MAAMC,YAAY,GAAGR,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMS,aAAa,GAAGT,MAAM,CAAC,IAAI,CAAC;EAClC,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE7CF,SAAS,CAAC,MAAM;IACd,IAAI,CAACS,YAAY,CAACI,OAAO,EAAE;;IAE3B;IACA,IAAIH,aAAa,CAACG,OAAO,EAAE;MACzB,IAAI;QACFH,aAAa,CAACG,OAAO,CAACC,OAAO,CAAC,CAAC;MACjC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,IAAI,CAAC,+BAA+B,EAAEF,GAAG,CAACG,OAAO,CAAC;MAC5D;IACF;;IAEA;IACAR,aAAa,CAACG,OAAO,GAAGV,UAAU,CAACgB,MAAM,CAAC;MACxCC,SAAS,EAAEX,YAAY,CAACI,OAAO;MAC/BQ,SAAS,EAAE,MAAM;MACjBC,aAAa,EAAE,SAAS;MACxBC,WAAW,EAAE,MAAM;MACnBC,QAAQ,EAAE,CAAC;MACXC,UAAU,EAAE,IAAI;MAChBC,MAAM,EAAE;IACV,CAAC,CAAC;;IAEF;IACAhB,aAAa,CAACG,OAAO,CAACc,EAAE,CAAC,OAAO,EAAE,MAAM;MACtCf,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC,CAAC;;IAEF;IACAF,aAAa,CAACG,OAAO,CAACe,IAAI,CAACrB,QAAQ,CAAC;;IAEpC;IACA,OAAO,MAAM;MACX,IAAIG,aAAa,CAACG,OAAO,IAAIH,aAAa,CAACG,OAAO,CAACC,OAAO,EAAE;QAC1D,IAAI;UACFJ,aAAa,CAACG,OAAO,CAACC,OAAO,CAAC,CAAC;UAC/BJ,aAAa,CAACG,OAAO,GAAG,IAAI;QAC9B,CAAC,CAAC,OAAOE,GAAG,EAAE;UACZC,OAAO,CAACC,IAAI,CAAC,2BAA2B,EAAEF,GAAG,CAACG,OAAO,CAAC;QACxD;MACF;IACF,CAAC;EACH,CAAC,EAAE,CAACX,QAAQ,CAAC,CAAC;EAEd,oBACEF,OAAA;IAAKwB,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,QAAQ,EAAE,GAAG;MAAEC,SAAS,EAAE;IAAG,CAAE;IAAAC,QAAA,gBAC1D5B,OAAA;MAAK6B,GAAG,EAAEzB;IAAa;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAC7B,CAAC3B,OAAO,iBACPN,OAAA;MAAGwB,KAAK,EAAE;QAAEU,SAAS,EAAE,QAAQ;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAP,QAAA,EAAC;IAAoB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAC1E;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC9B,EAAA,CAzDIF,QAAQ;AAAAmC,EAAA,GAARnC,QAAQ;AA2Dd,eAAeA,QAAQ;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}