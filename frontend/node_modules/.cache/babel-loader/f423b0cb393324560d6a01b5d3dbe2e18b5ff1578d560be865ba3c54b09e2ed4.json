{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\poula\\\\Desktop\\\\Projet-Site-Web-main\\\\Projet-Site-Web-main\\\\frontend\\\\src\\\\pages\\\\changingpassword.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\"; //pour pouvoir naviguer entre les pages\nimport axios from \"axios\"; //pour pouvoir appeler des fonctions dans le serveur.js\nimport { Link } from \"react-router-dom\"; //permet d'utiliser les balises link\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChangingPassword() {\n  _s();\n  var _location$state;\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // On récupère l'email passé depuis la page précédente si il l'a rentré avant\n  const [email] = useState(((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.email) || '');\n  const [code, setCode] = useState(''); //stock le code à 4 chiffres qui a été tapé par le joueur dans la page d'avant\n  const [newPassword, setNewPassword] = useState(''); //garde le nouveau mot de passe \n  const [error, setError] = useState(''); //permet de mettre une erreur si le code est pas celui envoyé par mail \n\n  const handleReset = async e => {\n    //evite que la page se recharge complètement et que l'on perde les informations\n    e.preventDefault();\n    try {\n      // Cette route devra être créée dans server.js\n      await axios.post(\"http://localhost:3001/api/reset-password-code\", {\n        email,\n        code,\n        newPassword\n      }); //requete au serveur pour pouvoir changer le mot de passe envoyant l'email le code envoyé par mail et le nouveau mot de passe \n      alert(\"Mot de passe modifié avec succès !\");\n      navigate('/login'); //retourne à la page se connecter\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Code invalide ou expiré.\"); //si le code est mauvais ou expiré (pas précisé lequel des deux pour des raisons de sécurité)\n    }\n  };\n  return (\n    /*#__PURE__*/\n    //mise en page\n    _jsxDEV(\"div\", {\n      className: \"min-h-screen w-full flex flex-col bg-cover bg-center overflow-hidden justify-center items-center\",\n      style: {\n        backgroundImage: 'url(\"https://i.postimg.cc/Cxsv37Bv/Sans-titre-3-20260114234428.png\")'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleReset,\n        className: \"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-center mb-4\",\n          children: \"R\\xE9initialisation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-700 mb-6\",\n          children: [\"Email : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 67\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 font-semibold mb-2\",\n            children: \"Code \\xE0 4 chiffres :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            maxLength: \"4\",\n            onChange: e => setCode(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 font-semibold mb-2\",\n            children: \"Nouveau mot de passe :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: e => setNewPassword(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition mb-4\",\n          children: \"Valider le changement\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 text-center\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"text-blue-600 hover:underline\",\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this)\n  );\n}\n_s(ChangingPassword, \"UrlhnjvnTFlUTRzgBR7ueHp8ol4=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = ChangingPassword;\nvar _c;\n$RefreshReg$(_c, \"ChangingPassword\");","map":{"version":3,"names":["React","useState","useLocation","useNavigate","axios","Link","jsxDEV","_jsxDEV","ChangingPassword","_s","_location$state","location","navigate","email","state","code","setCode","newPassword","setNewPassword","error","setError","handleReset","e","preventDefault","post","alert","err","_err$response","_err$response$data","response","data","className","style","backgroundImage","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","maxLength","onChange","target","value","required","to","_c","$RefreshReg$"],"sources":["C:/Users/poula/Desktop/Projet-Site-Web-main/Projet-Site-Web-main/frontend/src/pages/changingpassword.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";//pour pouvoir naviguer entre les pages\nimport axios from \"axios\";//pour pouvoir appeler des fonctions dans le serveur.js\nimport { Link } from \"react-router-dom\";//permet d'utiliser les balises link\n\n\nexport default function ChangingPassword() {\n    const location = useLocation();\n    const navigate = useNavigate();\n    \n    // On récupère l'email passé depuis la page précédente si il l'a rentré avant\n    const [email] = useState(location.state?.email || '');\n    const [code, setCode] = useState('');//stock le code à 4 chiffres qui a été tapé par le joueur dans la page d'avant\n    const [newPassword, setNewPassword] = useState('');//garde le nouveau mot de passe \n    const [error, setError] = useState('');//permet de mettre une erreur si le code est pas celui envoyé par mail \n\n    const handleReset = async (e) => {//evite que la page se recharge complètement et que l'on perde les informations\n        e.preventDefault();\n        try {\n            // Cette route devra être créée dans server.js\n            await axios.post(\"http://localhost:3001/api/reset-password-code\", {\n                email,\n                code,\n                newPassword\n            });//requete au serveur pour pouvoir changer le mot de passe envoyant l'email le code envoyé par mail et le nouveau mot de passe \n            alert(\"Mot de passe modifié avec succès !\");\n            navigate('/login');//retourne à la page se connecter\n        } catch (err) {\n            setError(err.response?.data?.error || \"Code invalide ou expiré.\");//si le code est mauvais ou expiré (pas précisé lequel des deux pour des raisons de sécurité)\n        }\n    };\n\n    return (//mise en page\n        <div className=\"min-h-screen w-full flex flex-col bg-cover bg-center overflow-hidden justify-center items-center\" style={{\n            backgroundImage: 'url(\"https://i.postimg.cc/Cxsv37Bv/Sans-titre-3-20260114234428.png\")',\n        }}>\n        <form onSubmit={handleReset} className=\"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm\">\n            <h1 className=\"text-2xl font-bold text-center mb-4\">Réinitialisation</h1>\n            <p className=\"text-center text-gray-700 mb-6\">Email : <strong>{email}</strong></p>\n            \n            <div className=\"mb-4\">\n                <label className=\"block text-gray-700 font-semibold mb-2\">Code à 4 chiffres :</label>\n                <input \n                    type=\"text\" \n                    maxLength=\"4\" \n                    onChange={(e) => setCode(e.target.value)} \n                    required \n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                />\n            </div>\n\n            <div className=\"mb-6\">\n                <label className=\"block text-gray-700 font-semibold mb-2\">Nouveau mot de passe :</label>\n                <input \n                    type=\"password\" \n                    onChange={(e) => setNewPassword(e.target.value)} \n                    required \n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                />\n                \n            </div>\n\n            <button type=\"submit\" className=\"w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition mb-4\">Valider le changement</button>\n            {error && <p className=\"text-red-500 text-center\">{error}</p>}\n              <p className=\"text-center\"><Link to=\"/\" className=\"text-blue-600 hover:underline\">Annuler</Link></p>\n        </form>\n      \n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}